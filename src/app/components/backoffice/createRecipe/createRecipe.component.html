
<div class="container">
  <div class="container-fluid bg-3 text-left">
    <div class="row">
      <div id="nav-home">
        <ul class="nav nav-tabs">
          <li><h3>Publicar Nova Receita</h3></li>
        </ul>

<form [formGroup]="form" id="recipeForm" class="row g-3">
  <div class="form-group form-margin ">
    <label class="form-label">Titulo</label>
    <div class="input-group">
      <span class="input-group-addon">
        <i style="background:transparent;border:none"></i>
      </span>
      <input type="text" formControlName="name" class="form-control" required />
    </div>
  </div>

  <div class="form-group form-margin">
    <label class="form-label ">Categoria</label>
    <div class="input-group ">
      <span class="input-group-addon">
        <i style="background:transparent;border:none"></i>
      </span>
      <select formControlName="categoryId" class="form-select" style="width: 315px; height: 35px">
        <option value="-1">Selecionar Categoria</option>
        <option *ngFor="let category of categories" ngValue="{{ category.id }}">{{ category.name }}</option>
      </select>
    </div>
  </div>

  <div class="form-group form-margin">
    <label class="form-label ">Dificuldade</label>
    <div class="input-group ">
      <span class="input-group-addon">
        <i style="background:transparent;border:none"></i>
      </span>
      <select class="form-select" style="width: 315px; height: 35px" formControlName="difficulty">
        <option value="-1">Selecionar Dificuldade</option>
        <option value="0">{{ this.enumTextsUtil.getDifficultyLevelText(0) }}</option>
        <option value="1">{{ this.enumTextsUtil.getDifficultyLevelText(1) }}</option>
        <option value="2">{{ this.enumTextsUtil.getDifficultyLevelText(2) }}</option>
        <option value="3">{{ this.enumTextsUtil.getDifficultyLevelText(3) }}</option>
        <option value="4">{{ this.enumTextsUtil.getDifficultyLevelText(4) }}</option>
      </select>
    </div>
  </div>

  <div class="form-group form-margin ">
    <label class="form-label">Tempo de Preparação</label>
    <div class="input-group">
      <span class="input-group-addon">
        <i style="background:transparent;border:none"></i>
      </span>
      <input type="time" formControlName="executionTime" class="form-control" required />
    </div>
  </div>

  <div class="form-group form-margin ">
    <div class="input-group" id="ingredientsDiv">

      <ng-container formArrayName="recipeIngredients">
        <ng-container *ngFor="let ingredientForm of recipeIngredients.controls; let i = index" [formGroupName]="i">

          <div id="inlineIngredient">
            <div class="form-group form-margin ">
              <label class="form-label">Ingrediente nº {{ i+1 }}</label>
              <div class="lesson-form-row">
                <div class="input-group">
                  <span class="input-group-addon ">
                    <i style="background:transparent;border:none"></i>
                  </span>
                  <select formControlName="ingredientId" class="form-select" style="width: 180px; height: 35px">
                    <option value="-1" selected>Selecione Ingrediente</option>
                    <option *ngFor="let ingredient of ingredientsList" ngValue="{{ ingredient.id }}">{{ ingredient.name }}</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-group form-margin" style="margin-left: 10px; margin-right: 10px;">
              <label class="form-label">Quantidade</label>
              <div class="lesson-form-row">
                <div class="input-group">
                  <span class="input-group-addon ">
                    <i style="background:transparent;border:none"></i>
                  </span>
                  <input type="text" formControlName="quantity" style="width: 70px; height: 35px" class="form-control" required />
                </div>
              </div>
            </div>

            <div class="form-group form-margin ">
              <label class="form-label">Medida</label>
              <div class="lesson-form-row">
                <div class="input-group">
                  <span class="input-group-addon ">
                    <i style="background:transparent;border:none"></i>
                  </span>
                  <select class="form-select" style="width: 180px; height: 35px" formControlName="unit">
                    <option value="-1">Selecione a Medida</option>
                    <option value="0">{{ this.enumTextsUtil.getMeasurementUnitText(0) }}</option>
                    <option value="1">{{ this.enumTextsUtil.getMeasurementUnitText(1) }}</option>
                    <option value="2">{{ this.enumTextsUtil.getMeasurementUnitText(2) }}</option>
                    <option value="3">{{ this.enumTextsUtil.getMeasurementUnitText(3) }}</option>
                    <option value="4">{{ this.enumTextsUtil.getMeasurementUnitText(4) }}</option>
                    <option value="5">{{ this.enumTextsUtil.getMeasurementUnitText(5) }}</option>
                    <option value="6">{{ this.enumTextsUtil.getMeasurementUnitText(6) }}</option>
                    <option value="7">{{ this.enumTextsUtil.getMeasurementUnitText(7) }}</option>
                    <option value="8">{{ this.enumTextsUtil.getMeasurementUnitText(8) }}</option>
                    <option value="9">{{ this.enumTextsUtil.getMeasurementUnitText(9) }}</option>
                    <option value="10">{{ this.enumTextsUtil.getMeasurementUnitText(10) }}</option>
                    <option value="11">{{ this.enumTextsUtil.getMeasurementUnitText(11) }}</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

        </ng-container>
      </ng-container>
    </div>
  </div>

  <button id="btnAddIngredient" class="btn btn-outline-secondary" style="width: 100px; height: 30px"
    (click)="addNewIngredient()">Adicionar</button>
  <button id="btnRemoveIngredient" class="btn btn-outline-secondary" style="width: 100px; height: 30px"
    (click)="removeNewIngredient()">Eliminar</button>

<br>
<br>

  <div class="form-group form-margin ">
    <label class="form-label">Modo de Preparo</label>
    <div class="input-group">
      <span class="input-group-addon">
        <i style="background:transparent;border:none"></i>
      </span>
      <textarea formControlName="description" class="form-control"
      style="width: 325px; font: size 12px; height: 180px; border-color:lightgray;" placeholder=
"Passo 1 -

Passo 2 -

Passo 3 -
..." required></textarea>
    </div>
    <br>


    <div class="form-group form-margin ">
      <label class="form-label">Imagem Receita</label>
      <div class="input-group">
        <input #imageInput type="file" accept="image/*" (change)="processImageFile(imageInput)" />
      </div>
      <br>
      <div class="form-group form-margin">
        <button type="submit" [disabled]="!form.valid" style="width: 315px; height: 35px"
          (click)="createRecipe()">Publicar Receita</button>
      </div>
    </div>
  </div>
</form>
     </div>
   </div>
 </div>
</div>

